<?php $__env->startSection('notification'); ?>

<!-- Regjistrimi Departmentit -->
<?php if(null !== Session::get('message') && Session::get('message') == Enum::successful): ?>
<div class="alert alert-success alert-dismissible" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <?php echo Session::get('reason'); ?>

</div>
<?php elseif(Session::get('message') == Enum::failed): ?>
<div class="alert alert-danger alert-dismissible" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <?php echo Lang::get('warn.error_undefined'); ?>

</div>

<?php endif; ?>
<!-- End Regjistrimi Departmentit -->
<?php $__env->stopSection(); ?>


<?php $__env->startSection('profile'); ?>

<div class="box box-solid">
    <div class="box-body">

        <div class='col-lg-3'>

            <div class='img-thumbnail '>
                <img src="/smpsfl/doc/avatar/<?php echo $profile['avatar']; ?>" class="img img-rounded  img-responsive">
            </div>

        </div>

        <div class='col-lg-6'>
            <br>
            <strong class='text-uppercase fa-lg' ><?php echo $profile['emri']." ( ".$profile['emri_prindit']." ".$profile['mbiemri_prindit']." ) " .$profile['mbiemri']; ?></strong>

            <br>
            <strong><?php echo Lang::get('general.uid'); ?>:</strong> <?php echo $profile['uid']; ?> 
            <br><b><?php echo Lang::get('general.birthdate'); ?>:</b><?php echo $profile['datalindjes']; ?>

            <br><b><?php echo Lang::get('general.subject'); ?>:</b> <?php echo Enum::convertdrejtimi($profile['drejtimi']); ?>

            <br><b><?php echo Lang::get('general.semester'); ?>:</b> <?php echo $profile['semestri']; ?>

        </div>

        <div class="col-lg-3">

            <ul class="list-group list-group-unbordered">

                <li class="list-group-item"> <strong><?php echo Lang::get('general.contract_fee'); ?>: </strong><span 
                        class="label label-info" ><?php echo $profile['kontrata_pageses']; ?> <span class="fa fa-euro"></span> </span> </li>
                <li class="list-group-item"><strong><?php echo Lang::get('general.installments'); ?>: </strong> <?php echo $profile['keste']; ?></li>
                <li class="list-group-item "><strong><?php echo Lang::get('general.installments_month'); ?>: </strong> <span class="label label-info" ><?php echo $profile['kontrata_pageses']/$profile['keste']; ?> <span class="fa fa-euro"></span></span>  </li>

            </ul>
            <a class="btn btn-info" href="/smpsfl/doc/kontrata/student/<?php echo $profile['kontrata_dir']; ?>"><span class="fa fa-print fa-lg"></span></a>
        </div>

    </div>
</div>

<div class="row">
    <div  class='col-lg-6'>
        <br>
        <div class="box box-solid">
            <div class="box-header with-border">
                <h3 class='box-title'><?php echo Lang::get('general.student_details'); ?></h3>
            </div>
            <div class="box-body">
                <ul class="list-group list-group-unbordered">
                    <li class="list-group-item"> <strong><?php echo Lang::get('general.location'); ?>: </strong><?php echo $profile['vendbanimi']; ?> - <?php echo $profile['adressa']; ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.birthplace'); ?>: </strong> <?php echo $profile['vendlindja']; ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.gender'); ?>: </strong> <?php echo Enum::convertGjinia($profile['gjinia']); ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.phone'); ?>: </strong> <?php echo $profile['telefoni']; ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.email'); ?>: </strong> <?php echo $profile['email']; ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.idpersonal'); ?>: </strong> <?php echo $profile['nrpersonal']; ?></li>
                </ul>
            </div>
        </div>
    </div>
    <br>


    <div  class='col-lg-6'>
        <div class="box box-solid">
            <div class="box-header with-border">
                <h3 class='box-title'><?php echo Lang::get('general.education_details'); ?></h3>
            </div>
            <div class="box-body">
                <ul class="list-group list-group-unbordered">
                    <li class="list-group-item"> <strong><?php echo Lang::get('general.subject'); ?>: </strong><?php echo Enum::convertdrejtimi($profile['drejtimi']); ?> </li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.level'); ?>: </strong> <?php echo Enum::convertLevel($profile['niveli']); ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.status'); ?>: </strong> <?php echo Enum::convertStatusi($profile['statusi']); ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.academic_year'); ?>: </strong> <?php echo $profile['viti_aka']; ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.transfer'); ?>: </strong> <?php echo Enum::convertTransfer($profile['transfer']); ?></li>
                    <li class="list-group-item"><strong><?php echo Lang::get('general.qualification'); ?>: </strong> <?php echo $profile['kualifikimi']; ?></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<?php $__env->stopSection(); ?>


<?php $__env->startSection('vijushmeria'); ?>
<table class='table table-responsive table-bordered'>
    <tr>
        <th><?php echo Lang::get("general.course"); ?></th>
        <th><?php echo Lang::get("general.professor"); ?></th>
        <th><?php echo Lang::get("general.num_hour"); ?></th>
    </tr>
    <?php foreach($vijushmeria as $value): ?>
    <tr>
        <td><?php echo $value['lenda']; ?></td>
        <td><?php echo $value['prof']; ?></td>
        <td><?php echo $value['numhour']; ?></td>
    </tr>
    <?php endforeach; ?>
</table>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('pagesat'); ?>
<div class="text-right">
    <a class="btn btn-default btn-sm" href="<?php echo action('StudentController@getPrintListPagesat',array($profile['uid'])); ?>">
        <span class="fa fa-print"></span>
    </a>
    <br>
    <br>
</div>
<div class="box box-solid">
    <div class="box-body no-padding">
        <table class='table table-responsive table-bordered'>
            <tr>
                <th>#</th>
                <th><?php echo Lang::get('general.bank_name'); ?></th>
                <th><?php echo Lang::get('general.description_fee'); ?></th>
                <th><?php echo Lang::get('general.feetype'); ?></th>
                <th><?php echo Lang::get('general.sum'); ?></th>
                <th><?php echo Lang::get('general.registred');$numFee=0; ?></th>
                <th> </th>
            </tr>

            <?php foreach($studenti->getPagesat as $value): ?>
            <tr>
                <td><?php echo ++$numFee; ?></td>
                <td><?php echo Enum::convertTypeBank($value['emri_bankes']); ?></td>
                <td><?php echo $value['pershkrimi']; ?></td>
                <td><?php echo Enum::convertLlojetPagesave($value['tipi']); ?></td>
                <td><span class="label label-info"><?php echo $value['shuma'];$shumaPaguar = $shumaPaguar + $value['shuma']; ?> <span class="fa fa-euro"></span> </span></td>
                <td><?php echo $value->data; ?></td>
                <td><a href='<?php echo action('FeeController@getEdit',[$value->id]); ?>' class='btn btn-sm btn-warning'><i class='fa fa-edit'></i></a></td>
            </tr>
            <?php endforeach; ?>
            <tr>
                <td colspan="4" class="text-right bold"><?php echo Lang::get('general.total_sum'); ?></td>
                <td><span class="label label-primary"><?php echo $shumaPaguar; ?> <span class="text-center fa fa-lg fa-euro"></span> </span></td>
            </tr>
        </table>

    </div>
</div>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('notimet'); ?>
<div class="box box-solid">
    <div class="box-body">
        <div class="col-md-6">
            <p><i class="fa fa-circle text-red"></i><b> Jo kaluese | Refuzim</b></p>
            <p><i class="fa fa-circle text-green"></i><b> Pranuar</b></p>
            <p><i class="fa fa-circle text-yellow"></i><b> Nuk eshte perfundimtare ende | Raporti eshte i hapur</b></p>
        </div>
        <div class="col-md-6">
            <a class="btn btn-app" href="<?php echo action('StudentController@getPrintTranskriptaNotave',array($profile['uid'])); ?>">
                <i class="fa fa-print"></i> Print
            </a>
        </div>
    </div>
</div>
<table class='table table-responsive table-bordered'>
    <tr>
        <th>#</th>
        <th><?php echo Lang::get('general.course'); ?></th>
        <th><?php echo Lang::get('general.grade'); ?></th>
        <th><?php echo Lang::get('general.lecturer'); ?></th>
        <th><?php echo Lang::get('general.date'); ?></th>
        <?php if($settings['provim_active'] == Enum::yes): ?>
        <th><?php echo Lang::get('general.refuse'); ?></th>
        <?php endif; ?>
        <th><?php echo Lang::get('general.present'); ?></th>
    </tr>
    <?php
    $i = -1;
    $currentSem = 1;
    ?>
    <?php foreach($notimet as $value): ?>
    <?php
    $i++;
    if ($value->refuzim == Enum::YES || $value->nota == 5) {
        $classColor = "bg-danger";
        $bulletColor = ' text-red';
    } else if ($value->refuzim == Enum::NO && $value->raportiNotave->locked == Enum::locked && $value->nota > 5) {
        $classColor = "bg-success";
        $bulletColor = ' text-green';
    } else if ($value->refuzim == Enum::NO && $value->raportiNotave->locked == Enum::nolocked) {
        $classColor = "bg-warning";
        $bulletColor = ' text-yellow';
    } else {
        $classColor = "";
        $bulletColor = ' ';
    }
    $classTree = "";
    if (isset($notimet[$i + 1])) {
        if ($notimet[$i + 1]->raportiNotave->lendet->idl == $value->raportiNotave->lendet->idl) {
            $classTree = "fa fa-plus-square";
        }
    }
    if (isset($notimet[$i - 1])) {
        if ($notimet[$i - 1]->raportiNotave->lendet->idl == $value->raportiNotave->lendet->idl) {
            $classColor .= " hide";
        }
    }
    ?>
    <?php if($i == 0): ?>
    <?php
    $prevSemester = $value->raportiNotave->lendet->Semestri;
    ?>
    <tr class="bg-gray">
        <th colspan="6" class="text-center"> Semestri <?php echo $value->raportiNotave->lendet->Semestri; ?></th>
    </tr>
    <?php elseif($prevSemester !=  $value->raportiNotave->lendet->Semestri): ?>
    <tr class="bg-gray">
        <th colspan="6" class="text-center"> Semestri <?php echo $value->raportiNotave->lendet->Semestri; ?></th>
    </tr>
    <?php endif; ?>
    <?php
    $prevSemester = $value->raportiNotave->lendet->Semestri;
    ?>



    <?php if(($value->refuzim == Enum::YES || $value->nota == 5) && $value->raportiNotave->locked == Enum::locked): ?>
    <tr class="<?php echo $classColor; ?> failedIdl-<?php echo $value->raportiNotave->lendet->idl; ?> ">
        <td><span class=" fa fa-circle <?php echo $bulletColor; ?>"></span></td>
        <td> -- <?php echo $value->raportiNotave->lendet->Emri; ?></td>
        <td><?php echo $value->nota; ?></td>
        <td><?php echo $value->raportiNotave->administrata->emri. " ".$value->raportiNotave->administrata->mbiemri; ?></td>
        <td><?php echo date_format(date_create($value->raportiNotave->data_provimit),'d-m-Y'); ?></td>
        <td><?php if($value->paraqit_prezent): ?>
            <input type="checkbox" checked="checked" disabled>
            <?php else: ?>
            <input type="checkbox" disabled>
            <?php endif; ?>
        </td>
    </tr>
    <?php else: ?>
    <tr class="<?php echo $classColor; ?> ">
        <td> <span class=" fa fa-circle <?php echo $bulletColor; ?>"></td>
        <td><span class="<?php echo $classTree; ?> trigger-show-detail-course text-default"  data-show-course-failed="<?php echo $value->raportiNotave->lendet->idl; ?>"> <?php echo $value->raportiNotave->lendet->Emri; ?></span> </td>

        <?php if($value->nota == 4): ?>
        <td>E Padefinuar</td>
        <?php else: ?>
        <td><?php echo $value->nota; ?></td>
        <?php endif; ?>
        <td><?php echo $value->raportiNotave->administrata->emri. " ".$value->raportiNotave->administrata->mbiemri; ?></td>
        <td><?php echo date_format(date_create($value->raportiNotave->data_provimit),'d-m-Y'); ?></td>
        <td><?php if($value->paraqit_prezent): ?>
            <input type="checkbox" checked="checked" disabled>
            <?php else: ?>
            <input type="checkbox" disabled>
            <?php endif; ?>
        </td>
    </tr>
    <?php endif; ?>
    <?php endforeach; ?>
</table>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('title'); ?>
<section class="content-header">
    <h1>
        <?php echo $profile['emri']." ".$profile['mbiemri']; ?>


    </h1>
</section>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
<?php echo $__env->yieldContent('title'); ?>
<section class="content">
    <?php echo $__env->yieldContent('notification'); ?>
    <div class="nav-tabs-custom">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#profile" data-toggle="tab" aria-expanded="true"><?php echo Lang::get('general.student_profile'); ?></a></li>
            <li class=""><a href="#vijushmeria" data-toggle="tab" aria-expanded="false"><?php echo Lang::get('general.attendance'); ?></a></li>
            <li class=""><a href="#notimet" data-toggle="tab" aria-expanded="false"><?php echo Lang::get('general.exams'); ?></a></li>
            <li class=""><a href="#pagesat" data-toggle="tab" aria-expanded="false"><?php echo Lang::get('general.fee'); ?></a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="profile">
                <?php echo $__env->yieldContent('profile'); ?>
            </div>
            <div class="tab-pane" id="vijushmeria">
                <?php echo $__env->yieldContent('vijushmeria'); ?>
            </div>
            <div class="tab-pane" id="notimet">
                <?php echo $__env->yieldContent('notimet'); ?>
            </div>
            <div class="tab-pane" id="pagesat">
                <?php echo $__env->yieldContent('pagesat'); ?>
            </div>
        </div>
    </div>
</section>



<?php $__env->stopSection(); ?>
<?php echo $__env->make('admin.index', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>